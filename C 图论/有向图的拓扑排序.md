## [P2798 - 有向图的拓扑序列 - ZJHUOJ](http://172.20.8.83/problem.php?id=2798)
```cpp
#include<bits/stdc++.h>
using namespace std;
#define endl '\n'
const int inf=0x3f3f3f3f;
const int N=1e5+5;
int h[N],e[N],ne[N],st[N],dist[N],idx,n,ans;
int q[N],d[N],hh=0,tt=-1;//度
void add(int a,int b){
    e[idx]=b, ne[idx]=h[a], h[a]=idx++;
}
void topsort(){
    for(int i=1;i<=n;++i)
        if(!d[i])q[++tt]=i;
        while(tt>=hh){
            int t=q[hh++];
            for(int i=h[t];i!=-1;i=ne[i]){
                int j=e[i];
                --d[j];
                if(!d[j])q[++tt]=j;
            }
        }
        if(tt==n-1)for(int i=0;i<n;++i)cout<<q[i]<<" \n"[i==tt];
        else cout<<-1<<endl;
}
void solve(){
    memset(h,-1,sizeof h);
    int m,a,b; cin>>n>>m;
    for(int i=1;i<=m;++i){
        cin>>a>>b;
        ++d[b]; add(a,b); 
    }
    topsort();
}
signed main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    int T=1;
   // cin>>T;
    while(T--)solve();
    return 0;
}

//
链式前向星重置方式：(需要重置h和idx)
memset(h,-1,sizeof h);
idx=0;
```