##### æ‰‹å†™å †å¯æ”¯æŒçš„æ“ä½œï¼š
1. æ’å…¥ä¸€ä¸ªæ•°
2. æ±‚é›†åˆå½“ä¸­çš„æœ€å°å€¼
3. åˆ é™¤æœ€å°å€¼
4. *åˆ å‡ºä»»æ„ä¸€ä¸ªå…ƒç´ *
5. *ä¿®æ”¹ä»»æ„ä¸€ä¸ªå…ƒç´ *
6. å¯¹åº”STLä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—
 ![[Pasted image 20250720194326.png]]
###### æ€§è´¨ï¼š
1. ä»ä¸Šå¾€ä¸‹ä¾æ¬¡å¢å¤§ï¼Œå †é¡¶å¯¹åº”æœ€å°å€¼
2. å‚¨å­˜æ–¹å¼ï¼šxèŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æ˜¯2x, å³å­èŠ‚ç‚¹æ˜¯2x+1
3. å †çš„æ€§è´¨æ˜¯å±€éƒ¨çš„ï¼šæ¯ä¸ªçˆ¶èŠ‚ç‚¹æ¯”å®ƒçš„å­èŠ‚ç‚¹å¤§ï¼ˆæœ€å¤§å †ï¼‰æˆ–å°ï¼ˆæœ€å°å †ï¼‰ï¼Œä½†ä¸è¦æ±‚æ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½æ¯”ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹å°æˆ–å¤§ã€‚(å †çš„å¤§å°å…³ç³»åªæ¶‰åŠåˆ°çˆ¶å­èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»)
###### æ“ä½œï¼š
## ğŸ” ä¸Šæ»¤ç”¨å¾ªç¯çš„åŸå› ï¼š
### ä¸Šæ»¤è·¯å¾„æ˜¯ä»èŠ‚ç‚¹åˆ°æ ¹ï¼ˆç¼–å·è¶Šæ¥è¶Šå°ï¼‰
- è·¯å¾„å”¯ä¸€ï¼š`i â†’ parent(i) â†’ parent(parent(i)) â†’ ...`
- æœ€å¤šèµ° logâ¡n\log nlogn æ­¥ï¼Œèµ°åˆ°æ ¹
- æ˜“äºå†™æˆ `while(i > 1)`
- 
### ç¤ºä¾‹ä»£ç ï¼š
```cpp
`void up(int i) {  
while(i > 1 && heap[i] < heap[i / 2]) {      
swap(heap[i], heap[i / 2]);   
i /= 2;  } 
}`
```
---
## ğŸ” ä¸‹æ»¤å¸¸å†™æˆé€’å½’çš„åŸå› ï¼š
### ä¸‹æ»¤è·¯å¾„æ˜¯ä»èŠ‚ç‚¹å‘ä¸¤ä¸ªå­èŠ‚ç‚¹èµ°ï¼ˆæœ‰åˆ†æ”¯ï¼‰
- æ¯ä¸ªç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œè¦åˆ¤æ–­é€‰å“ªä¸ªç»§ç»­é€’å½’
- å†™æˆé€’å½’ä¼šæ›´è‡ªç„¶æ¸…æ™°ï¼ˆç»“æ„ç±»ä¼¼ DFSï¼‰
### ç¤ºä¾‹ä»£ç ï¼ˆé€’å½’ï¼‰ï¼š
```cpp
void down(int i) {  
int t = i;  
if(2 * i <= size && heap[2 * i] < heap[t]) t = 2 * i;   
if(2 * i + 1 <= size && heap[2 * i + 1] < heap[t]) t = 2 * i + 1;   
if(t != i) {     
swap(heap[i], heap[t]);    
down(t); // é€’å½’ç»§ç»­å¾€ä¸‹   
    }
}`
```
# [838. å †æ’åº - AcWingé¢˜åº“](https://www.acwing.com/problem/content/840/)
```cpp
#include<bits/stdc++.h>
using namespace std;
#define endl "\n"
//#define int long long
//#define ll long long
//#define ULL unsigned long long
//const int N=1e5+3,P=131;
const int N=1e5+10;
int n,m;
int h[N],ph[N],hp[N],cnt;
void down(int u){
    int t=u;
    if(u*2<=cnt&&h[u*2]<h[t])t=u*2;
    if(u*2+1<=cnt&&h[u*2+1]<h[t])t=u*2+1;
    if(u!=t){
        swap(h[u],h[t]);
        down(t);
    }
}
void solve(){
  int n,m; cin>>n>>m;
  for(int i=1;i<=n;++i)cin>>h[i];
  cnt=n;                    
  for(int i=n/2;i;--i)down(i);
  //å †åŒ–,åˆå§‹åŒ–å †(å°é¡¶å †)çš„ç»“æ„
  //ä»n/2å¼€å§‹å †åŒ–,æ˜¯å› ä¸ºä»n/2+1åˆ°nçš„èŠ‚ç‚¹æ˜¯å¶èŠ‚ç‚¹ï¼Œå®ƒä»¬ä¸éœ€è¦è°ƒæ•´ã€‚n/2æ˜¯æœ€å¤§çš„æœ‰å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
  //çˆ¶èŠ‚ç‚¹çš„åºå·æ˜¯å­èŠ‚ç‚¹çš„1/2
  while(m--){
    cout<<h[1]<<" \n"[m==0];
    h[1]=h[cnt];
    --cnt;
    down(1);
  }
 
}
signed main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    int T=1;
    //cin>>T;
   while(T--)solve();
   return 0;
}
```

# [839. æ¨¡æ‹Ÿå † - AcWingé¢˜åº“](https://www.acwing.com/problem/content/submission/841/)
```cpp
#include<bits/stdc++.h>
using namespace std;
#define endl "\n"
//#define int long long
//#define ll long long
//#define ULL unsigned long long
//const int N=1e5+3,P=131;
const int N=1e5+10;
int n,m;
int h[N],ph[N],hp[N],cnt;
//ph:è®°å½•ç¬¬å‡ ä¸ªæ’å…¥ï¼› hp:å¦‚æœå †ä¸­ç¬¬iä¸ªæ’å…¥çš„å…ƒç´ åœ¨å †æ•°ç»„ h ä¸­çš„ä½ç½®
void heap_swap(int a,int b){
    swap(ph[hp[a]],ph[hp[b]]);
    swap(hp[a],hp[b]);
    swap(h[a],h[b]);
   //æ›´æ–°ä¸¤ä¸ªå…ƒç´ çš„ç¼–å·æ˜ å°„ï¼ˆ`ph[ç¼–å·] = æ–°ä½ç½®`ï¼‰  
  //æ›´æ–°ä¸¤ä¸ªä½ç½®å¯¹åº”çš„ç¼–å·ï¼ˆ`hp[ä½ç½®] = æ–°ç¼–å·`ï¼‰
  //äº¤æ¢å †çš„å€¼
  //hpçš„å­˜åœ¨å¯ä»¥ç»´æŒphçš„æ­£ç¡®æ€§ï¼Œé¡ºåºä¸è¦é¢ å€’
}
void down(int u){
    int t=u;
    if(u*2<=cnt&&h[u*2]<h[t])t=u*2;
    if(u*2+1<=cnt&&h[u*2+1]<h[t])t=u*2+1;
    if(u!=t){
        heap_swap(u,t);
        down(t);
    }
}
void up(int u){
    while(u/2&&h[u/2]>h[u]){
        heap_swap(u/2,u);
        u/=2;
    }
}
void solve(){
  int n,m=0; cin>>n;
  while(n--){
    string op;
    int k,x;
    cin>>op;
    //cout<<op<<endl;
    if(op=="I"){
        cin>>x;
        ++cnt; ++m;
        ph[m]=cnt,hp[cnt]=m;
        //åœ¨mç¼–å·æ‰€åœ¨çš„ä½ç½®cntï¼›ç¬¬cntä½ç½®å¯¹åº”çš„ç¼–å·m  
        h[cnt]=x;
        up(cnt);//å°†ä¸‹è¡¨ä¸Šæµ®
    }
    else if(op=="PM")cout<<h[1]<<endl; 
    else if(op=="DM"){
        heap_swap(1,cnt);
        --cnt;
        down(1);
    } 
    else if(op=="D"){
        cin>>k;
        k=ph[k];
        heap_swap(k,cnt);
        --cnt;
        down(k),up(k);//ä¸çŸ¥é“äº¤æ¢ä¹‹åå †ä¸­çš„å¤§å°å…³ç³»
    }
    else{
        cin>>k>>x;
        k=ph[k];
        h[k]=x;
        down(k),up(k);
    }
  }
}
signed main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    int T=1;
    //cin>>T;
   while(T--)solve();
   return 0;
}

```
![[11d367ed32b82b31894ec65e8098fdc.png]]
